<% provide(:title, @user.name) %>
<h2>"Welcome, "</h2>
<h2><%= @user.name %></h2>

<div class="section">
  <div class="container">
	<div class="columns is-centered">
      <div class="column is-4">
      <h2 class="title is-2 is-spaced has-text-centered">My Events</h2>
      <% @events.each do |event| %>
        <tr>
        <td><%= event.location %></td></br>
        <td><%= event.date %></td></br>
        </tr>
      <% end %>
      </div>
    </div>
  </div>
</div>


<div class="section">
  <div class="container">
	<div class="columns is-centered">
      <div class="column is-4">
        <h2 class="title is-2 is-spaced has-text-centered">Upcoming Events</h2>
        <td><%= @event.location %></td>
      </div>
    </div>
  </div>
</div>

<div class="section">
  <div class="container">
	<div class="columns is-centered">
      <div class="column is-4">
      <td><%= link_to "#{@event.location}", @event %></td>
      <td><%=  "Event created by: " %></td>
      <td><%=  @event.creator.name %></td></br>
        <h2 class="title is-2 is-spaced has-text-centered">Attendees List</h2>


        
        <%= "Attendees: " %>
        <td><%=  @attendees.all %></td></br>
        <% @attendees.each do | attendee | %>
          <tr>
            <td><%= attendee.name %></td></br>
          </tr>
        <% end %>

        <span>Number of attendees: <%= User.find(@event.attendees.map { |enr| enr.id }).count %></span>
        <%= button_to 'Attend', attend_event_path(@event), method: :post, confirm: 'really?' %>
      </div>
    </div>
  </div>
</div>

<div class="section">
  <div class="container">
	<div class="columns is-centered">
      <div class="column is-4">
        <h2 class="title is-2 is-spaced has-text-centered">Upcoming Events</h2>
        <%= link_to "Log out", logout_path %>
      </div>
    </div>
  </div>
</div>
